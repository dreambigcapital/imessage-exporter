#!/bin/bash
# iMessage Exporter - Quick Start Guide

echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "            iMessage Exporter v1.0 - Setup"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "This will help you set up the iMessage Exporter."
echo ""
echo "ğŸ“‹ REQUIRED PERMISSIONS:"
echo ""
echo "You need to grant Terminal these permissions:"
echo "  1. Full Disk Access (to read Messages database)"
echo "  2. Contacts Access (to match phone numbers to names)"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
read -p "Press ENTER to open System Settings..." 

# Open System Settings to the right page
open "x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"

echo ""
echo "âœ“ System Settings opened"
echo ""
echo "Please follow these steps:"
echo ""
echo "1. In Full Disk Access:"
echo "   â€¢ Click the ğŸ”’ lock and enter your password"
echo "   â€¢ Click the + button"
echo "   â€¢ Go to Applications â†’ Utilities â†’ Terminal"
echo "   â€¢ Enable the checkbox"
echo ""
echo "2. Then go to Contacts (in the left sidebar):"
echo "   â€¢ Click the + button"  
echo "   â€¢ Add Terminal again"
echo "   â€¢ Enable the checkbox"
echo ""
echo "3. Close System Settings"
echo "   â€¢ QUIT and REOPEN Terminal"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
read -p "Press ENTER when you've completed these steps..." 

echo ""
echo "Great! Now you can run the exporter:"
echo ""
echo "  python3 imessage_archive.py"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
